<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loshytav | Lotuence Dube - App & Web Developer</title>
    <meta name="description" content="Portfolio of Lotuence Dube (Loshytav). App Developer, Web Designer, and Digital Marketing Expert based in Zimbabwe.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Syne for headings, Inter for body -->
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Syne', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            // Color palette derived from the photo: cyan, deep blue, and black
                            cyan: '#00B4D8',   // From the background/shirt highlights
                            blue: '#0A1128',   // Deep blue for contrast and depth
                            dark: '#02060F'    // Main background color
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #02060F; /* brand.dark */
            color: white;
            overflow-x: hidden;
            font-family: 'Inter', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Syne', sans-serif;
        }
        
        /* New animated background */
        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: radial-gradient(circle at 20% 30%, #0A1128 0%, #02060F 60%),
                        radial-gradient(circle at 80% 70%, #004e92 0%, #02060F 60%);
            overflow: hidden;
        }
        
        #background-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300b4d8' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.5;
            animation: moveBackground 60s linear infinite;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 100px) rotate(360deg); }
        }

        .glass-card {
            background: rgba(10, 17, 40, 0.4); /* brand.blue with opacity */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 180, 216, 0.15); /* brand.cyan */
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            background: rgba(10, 17, 40, 0.6);
            border-color: rgba(0, 180, 216, 0.4);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px -10px rgba(0, 180, 216, 0.2);
        }

        .gradient-text {
            background: linear-gradient(to right, #00B4D8, #2193b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .nav-link {
            position: relative;
            font-family: 'Inter', sans-serif;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: #00B4D8;
            transition: width 0.3s;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #02060F; 
        }
        ::-webkit-scrollbar-thumb {
            background: #0A1128; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00B4D8; 
        }
        
        .photo-glow {
            box-shadow: 0 0 50px -10px rgba(0, 180, 216, 0.4);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Background Container -->
    <div id="background-container"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 transition-all duration-300 bg-brand-dark/80 backdrop-blur-md border-b border-brand-blue/30" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <span class="text-2xl font-extrabold font-heading tracking-tighter text-white">
                        LOSHY<span class="text-brand-cyan">TAV</span>
                    </span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#home" class="nav-link text-sm font-medium hover:text-brand-cyan transition-colors">Home</a>
                        <a href="#about" class="nav-link text-sm font-medium hover:text-brand-cyan transition-colors">About</a>
                        <a href="#services" class="nav-link text-sm font-medium hover:text-brand-cyan transition-colors">Services</a>
                        <a href="#projects" class="nav-link text-sm font-medium hover:text-brand-cyan transition-colors">Projects</a>
                        <a href="#contact" class="px-4 py-2 rounded-full border border-brand-cyan text-brand-cyan hover:bg-brand-cyan hover:text-brand-dark transition-all text-sm font-bold font-heading">Contact Me</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" onclick="toggleMenu()" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-brand-blue focus:outline-none">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden hidden bg-brand-dark/95 backdrop-blur-xl absolute w-full border-b border-brand-blue/30" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 font-heading">
                <a href="#home" class="block px-3 py-2 rounded-md text-base font-medium hover:text-brand-cyan">Home</a>
                <a href="#about" class="block px-3 py-2 rounded-md text-base font-medium hover:text-brand-cyan">About</a>
                <a href="#services" class="block px-3 py-2 rounded-md text-base font-medium hover:text-brand-cyan">Services</a>
                <a href="#projects" class="block px-3 py-2 rounded-md text-base font-medium hover:text-brand-cyan">Projects</a>
                <a href="#contact" class="block px-3 py-2 text-brand-cyan font-bold">Contact Me</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="min-h-screen flex items-center relative px-4 pt-20 overflow-hidden">
        <div class="max-w-7xl mx-auto w-full grid lg:grid-cols-2 gap-12 items-center">
            <div class="relative z-10 order-2 lg:order-1 text-center lg:text-left">
                <div class="inline-block mb-4 px-4 py-1 rounded-full border border-brand-cyan/30 bg-brand-cyan/10 backdrop-blur-sm animate-pulse-slow">
                    <span class="text-brand-cyan text-sm tracking-widest uppercase font-bold">Sales & Marketing Certified • App Developer</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight tracking-tight">
                    Bridging the Gap Between <br/>
                    <span class="gradient-text">Code & Conversion.</span>
                </h1>
                
                <p class="mt-4 max-w-xl mx-auto lg:mx-0 text-xl text-gray-300 font-light leading-relaxed">
                    I'm <strong class="text-white font-semibold">Lotuence Dube</strong>. I combine my <strong class="text-brand-cyan">National Certificate in Sales and Marketing</strong> with cutting-edge development skills to build digital products that don't just function—they sell.
                </p>

                <div class="mt-10 flex flex-col sm:flex-row justify-center lg:justify-start gap-4 font-heading">
                    <a href="#projects" class="group relative px-8 py-4 bg-brand-cyan text-brand-dark font-bold text-lg rounded-lg hover:bg-white transition-all duration-300 overflow-hidden shadow-[0_0_30px_-5px_rgba(0,180,216,0.5)] hover:shadow-[0_0_30px_-5px_rgba(255,255,255,0.5)]">
                        <span class="relative flex items-center gap-2">
                            View Portfolio <i data-lucide="arrow-right" class="w-5 h-5"></i>
                        </span>
                    </a>
                    <a href="#contact" class="px-8 py-4 border-2 border-brand-cyan/50 text-brand-cyan hover:border-brand-cyan hover:bg-brand-cyan/10 transition-all duration-300 font-bold text-lg rounded-lg backdrop-blur-sm">
                        Let's Talk Business
                    </a>
                </div>
            </div>
            <div class="order-1 lg:order-2 flex justify-center animate-float relative z-10">
                <div class="relative w-72 h-72 md:w-96 md:h-96">
                    <div class="absolute inset-0 bg-brand-cyan rounded-full blur-3xl opacity-20 animate-pulse-slow"></div>
                    <img src="retouch_2025120309395000.jpg" alt="Lotuence Dube" class="rounded-full w-full h-full object-cover border-4 border-brand-cyan/50 photo-glow relative z-10">
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-24 relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                <div class="relative">
                    <div class="glass-card p-2 rounded-2xl rotate-3 hover:rotate-0 transition-transform duration-500">
                        <!-- Container for the dynamically generated image -->
                        <div id="coding-image-container" class="rounded-xl w-full h-auto bg-brand-blue/30 flex items-center justify-center min-h-[300px] overflow-hidden">
                            <p id="coding-image-loader" class="text-brand-cyan text-lg animate-pulse font-semibold p-8">
                                Generating professional coding image...
                            </p>
                            <img id="generated-coding-image" alt="Lotuence Dube Coding" class="w-full h-full object-cover hidden">
                        </div>
                    </div>
                </div>
                
                <div>
                    <h2 class="text-4xl md:text-5xl font-extrabold mb-6">The <span class="text-brand-cyan">Certified Marketer</span> Who Codes</h2>
                    <p class="text-lg text-gray-300 mb-6 leading-relaxed">
                        With a <strong class="text-brand-cyan">National Certificate in Sales and Marketing from Bulawayo Polytechnic</strong>, I understand the psychology behind user behavior.
                    </p>
                    <p class="text-lg text-gray-300 mb-6 leading-relaxed">
                        Most developers only care about syntax. I care about <strong class="text-white">success</strong>. An app isn't just lines of code—it's a tool to drive business, engage users, and generate revenue.
                    </p>
                    <p class="text-lg text-gray-300 mb-8 leading-relaxed">
                        Based in Zimbabwe, I'm bringing world-class, psychology-driven digital solutions to local and international markets. I speak both "Tech" and "Business".
                    </p>
                    
                    <div class="flex flex-wrap gap-4 font-heading">
                        <div class="glass-card px-6 py-4 rounded-xl text-center border-brand-cyan/30">
                            <span class="block text-3xl font-extrabold text-brand-cyan">Certified</span>
                            <span class="text-xs text-gray-400 uppercase tracking-wider font-semibold">Sales & Marketing</span>
                        </div>
                        <div class="glass-card px-6 py-4 rounded-xl text-center border-brand-cyan/30">
                            <span class="block text-3xl font-extrabold text-white">Developer</span>
                            <span class="text-xs text-gray-400 uppercase tracking-wider font-semibold">App & Web</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-24 relative z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-4">My <span class="gradient-text">Services</span></h2>
                <p class="text-gray-400 max-w-2xl mx-auto text-lg">Comprehensive digital solutions tailored for growth, backed by marketing expertise.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 font-heading">
                <!-- Service 1 -->
                <div class="glass-card p-8 rounded-2xl group hover:bg-brand-blue/60">
                    <div class="w-16 h-16 bg-brand-cyan/10 rounded-xl flex items-center justify-center mb-6 text-brand-cyan group-hover:scale-110 transition-transform shadow-[0_0_20px_-5px_rgba(0,180,216,0.3)]">
                        <i data-lucide="smartphone" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">App Development</h3>
                    <p class="text-sm text-gray-400 leading-relaxed font-sans">
                        Native Android and cross-platform apps designed for performance, user retention, and Play Store optimization.
                    </p>
                </div>

                <!-- Service 2 -->
                <div class="glass-card p-8 rounded-2xl group hover:bg-brand-blue/60">
                    <div class="w-16 h-16 bg-blue-500/10 rounded-xl flex items-center justify-center mb-6 text-blue-400 group-hover:scale-110 transition-transform shadow-[0_0_20px_-5px_rgba(59,130,246,0.3)]">
                        <i data-lucide="monitor" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Web Design</h3>
                    <p class="text-sm text-gray-400 leading-relaxed font-sans">
                        High-converting, responsive websites that look stunning and are built with SEO and marketing principles at their core.
                    </p>
                </div>

                <!-- Service 3 -->
                <div class="glass-card p-8 rounded-2xl group hover:bg-brand-blue/60">
                    <div class="w-16 h-16 bg-purple-500/10 rounded-xl flex items-center justify-center mb-6 text-purple-400 group-hover:scale-110 transition-transform shadow-[0_0_20px_-5px_rgba(168,85,247,0.3)]">
                        <i data-lucide="palette" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Graphic Design</h3>
                    <p class="text-sm text-gray-400 leading-relaxed font-sans">
                        Visual identity, UI/UX design, and branding materials that create a strong, memorable brand presence.
                    </p>
                </div>

                <!-- Service 4 -->
                <div class="glass-card p-8 rounded-2xl group hover:bg-brand-blue/60">
                    <div class="w-16 h-16 bg-brand-cyan/10 rounded-xl flex items-center justify-center mb-6 text-brand-cyan group-hover:scale-110 transition-transform shadow-[0_0_20px_-5px_rgba(0,180,216,0.3)]">
                        <i data-lucide="trending-up" class="w-8 h-8"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Digital Marketing</h3>
                    <p class="text-sm text-gray-400 leading-relaxed font-sans">
                        Leveraging my certified expertise to market your app or site. A great product needs great distribution strategy.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-24 relative z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16 font-heading">
                <div>
                    <h2 class="text-4xl md:text-5xl font-extrabold mb-4">Featured <span class="text-brand-cyan">Work</span></h2>
                    <p class="text-gray-400 text-lg font-sans">Recent deployments and experiments.</p>
                </div>
                <div class="hidden md:block h-[2px] bg-brand-blue/50 flex-grow mx-8 mb-5"></div>
            </div>

            <!-- Project Card: Bezbets -->
            <div class="glass-card rounded-3xl overflow-hidden grid lg:grid-cols-2 border-brand-cyan/20">
                <div class="p-8 md:p-12 flex flex-col justify-center">
                    <span class="text-brand-cyan font-bold text-sm mb-4 tracking-wider uppercase">LATEST RELEASE</span>
                    <h3 class="text-3xl md:text-4xl font-extrabold mb-4">Bezbets Mobile App</h3>
                    <p class="text-gray-300 mb-6 leading-relaxed text-lg">
                        A robust, user-centric mobile application developed for the betting platform. Features include real-time odds display, secure user authentication, and a streamlined betting interface, optimized for the Zimbabwean market.
                    </p>
                    
                    <div class="flex flex-wrap gap-3 mb-8 font-heading font-semibold">
                        <span class="px-4 py-2 rounded-full bg-brand-blue/50 border border-brand-cyan/30 text-sm text-brand-cyan">Android Dev</span>
                        <span class="px-4 py-2 rounded-full bg-brand-blue/50 border border-brand-cyan/30 text-sm text-brand-cyan">UI/UX</span>
                        <span class="px-4 py-2 rounded-full bg-brand-blue/50 border border-brand-cyan/30 text-sm text-brand-cyan">API Integration</span>
                    </div>

                    <a href="#" class="inline-flex items-center gap-2 text-brand-cyan hover:text-white transition-colors font-bold text-lg">
                        View on Play Store <i data-lucide="external-link" class="w-5 h-5"></i>
                    </a>
                </div>
                <div class="relative bg-gradient-to-br from-brand-blue to-brand-dark h-72 lg:h-auto flex items-center justify-center overflow-hidden group p-8">
                    <!-- Abstract Background Effect -->
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1555421689-491a97ff2040?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')] bg-cover bg-center opacity-20 group-hover:scale-105 transition-transform duration-700 mix-blend-overlay"></div>
                    
                    <!-- Phone Mockup Container -->
                    <div class="relative z-10 w-56 h-96 rounded-[3rem] border-8 border-brand-dark bg-brand-dark flex items-center justify-center shadow-2xl transform rotate-12 group-hover:rotate-6 transition-all duration-500 overflow-hidden">
                        <!-- Phone Notch (Top Bar) -->
                        <div class="absolute top-0 w-40 h-6 bg-brand-dark rounded-b-3xl z-20"></div>
                        
                        <!-- ACTUAL Bezbets App Screenshot -->
                        <img src="https://i.postimg.cc/xTBKhZ5Z/Screenshot-20251203-090828.jpg" 
                             alt="Bezbets App Screenshot UI" 
                             class="w-full h-full object-cover">
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 relative z-10">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-4xl md:text-5xl font-extrabold mb-8">Ready to <span class="gradient-text">Collaborate?</span></h2>
            <p class="text-xl text-gray-300 mb-12 max-w-2xl mx-auto">
                Whether you need an app built from scratch or a website to launch your brand, I am ready to engineer your vision with a marketing-first approach.
            </p>

            <div class="glass-card p-10 rounded-3xl inline-block w-full max-w-2xl text-left border-brand-cyan/20">
                <form id="contactForm" onsubmit="handleSubmit(event)" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-bold text-brand-cyan mb-2 font-heading">Name</label>
                            <input type="text" required class="w-full bg-brand-dark/60 border border-brand-blue/50 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-cyan focus:ring-1 focus:ring-brand-cyan transition-all text-white placeholder-gray-500" placeholder="Your Name">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-brand-cyan mb-2 font-heading">Email</label>
                            <input type="email" required class="w-full bg-brand-dark/60 border border-brand-blue/50 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-cyan focus:ring-1 focus:ring-brand-cyan transition-all text-white placeholder-gray-500" placeholder="your@email.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-brand-cyan mb-2 font-heading">Message</label>
                        <textarea rows="4" required class="w-full bg-brand-dark/60 border border-brand-blue/50 rounded-lg px-4 py-3 focus:outline-none focus:border-brand-cyan focus:ring-1 focus:ring-cyan transition-all text-white placeholder-gray-500" placeholder="Tell me about your project..."></textarea>
                    </div>
                    <button type="submit" class="w-full bg-brand-cyan text-brand-dark font-extrabold py-4 rounded-lg hover:bg-white transition-all shadow-[0_0_20px_-5px_rgba(0,180,216,0.5)] hover:shadow-[0_0_20px_-5px_rgba(255,255,255,0.5)] font-heading text-lg">
                        Send Message
                    </button>
                </form>
            </div>

            <div class="mt-12 flex flex-col md:flex-row justify-center gap-8 font-heading font-bold">
                <a href="mailto:lotuence@example.com" class="flex items-center justify-center gap-3 text-gray-300 hover:text-brand-cyan transition-colors px-6 py-3 glass-card rounded-xl">
                    <i data-lucide="mail" class="w-6 h-6 text-brand-cyan"></i> Email Me
                </a>
                <a href="tel:+263700000000" class="flex items-center justify-center gap-3 text-gray-300 hover:text-brand-cyan transition-colors px-6 py-3 glass-card rounded-xl">
                    <i data-lucide="phone" class="w-6 h-6 text-brand-cyan"></i> +263 7XX XXX XXX
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-brand-blue/30 bg-brand-dark py-12 relative z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="text-center md:text-left">
                <span class="text-2xl font-extrabold font-heading text-white">LOSHY<span class="text-brand-cyan">TAV</span></span>
                <p class="text-sm text-gray-500 mt-2 font-medium">© 2024 Lotuence Dube. All rights reserved.</p>
            </div>
            <div class="flex gap-8 font-heading font-bold">
                <!-- IMPORTANT FOR PLAY STORE CONSOLE -->
                <a href="#" class="text-sm text-gray-400 hover:text-brand-cyan transition-colors">Privacy Policy</a>
                <a href="#" class="text-sm text-gray-400 hover:text-brand-cyan transition-colors">Terms of Service</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // --- Utility Functions for Image Generation ---
        
        // Base64 to ArrayBuffer for image decoding (not strictly needed for display but good practice)
        function base64ToUrl(base64Data) {
            return `data:image/png;base64,${base64Data}`;
        }
        
        // Fetch wrapper for exponential backoff
        async function fetchWithExponentialBackoff(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        // Check if it's a transient error (e.g., 500, 429)
                        if (response.status === 429 || response.status >= 500) {
                            throw new Error(`Server error (${response.status}), retrying...`);
                        }
                        // For non-retryable errors, throw immediately
                        throw new Error(`Non-retryable HTTP error: ${response.statusText}`);
                    }
                    return response;
                } catch (error) {
                    // Only retry if the error indicates a need for backoff
                    if (i < maxRetries - 1 && error.message.includes("retrying")) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        console.error("Fetch failed after multiple retries:", error);
                        throw error;
                    }
                }
            }
        }

        // --- Image Generation Logic ---

        async function generateCodingImage() {
            const loader = document.getElementById('coding-image-loader');
            const imageElement = document.getElementById('generated-coding-image');
            const container = document.getElementById('coding-image-container');

            // Show loader, hide image
            loader.classList.remove('hidden');
            imageElement.classList.add('hidden');
            
            // Image Generation Prompt
            const userPrompt = "A professional portrait of a successful, well-dressed African man, similar to the profile image, sitting in a modern, dark, high-tech office environment in Zimbabwe, focused on a large monitor displaying complex code. The atmosphere is professional and driven. The lighting is cinematic with a strong cyan/blue glow reflecting off the code screen. Ultra-detailed, realistic photography.";
            
            const payload = { 
                instances: [{ prompt: userPrompt }], 
                parameters: { "sampleCount": 1, "aspectRatio": "1:1" } 
            };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`;

            try {
                const response = await fetchWithExponentialBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                
                const base64Data = result?.predictions?.[0]?.bytesBase64Encoded;

                if (base64Data) {
                    const imageUrl = base64ToUrl(base64Data);
                    imageElement.src = imageUrl;
                    imageElement.classList.remove('hidden');
                    loader.classList.add('hidden');
                    container.classList.remove('bg-brand-blue/30');
                    container.classList.remove('min-h-[300px]');
                } else {
                    throw new Error("Image generation failed to return data.");
                }

            } catch (error) {
                console.error("Error generating image:", error);
                loader.innerText = "Image failed to load. Using placeholder.";
                
                // Fallback: use a placeholder image URL
                imageElement.src = "https://placehold.co/600x400/0A1128/00B4D8?text=Coding+Image+Placeholder";
                imageElement.classList.remove('hidden');
                container.classList.remove('bg-brand-blue/30');
                container.classList.remove('min-h-[300px]');
            }
        }
        
        // --- Document Ready and Initialization ---

        window.onload = function() {
            // Initialize Lucide Icons
            lucide.createIcons();
            
            // Start the image generation process for the About section
            generateCodingImage();
        };

        // Menu Toggle Logic
        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Form Handling
        function handleSubmit(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            
            btn.innerText = "Message Sent Successfully!";
            btn.classList.remove('bg-brand-cyan', 'text-brand-dark', 'hover:bg-white');
            btn.classList.add('bg-green-500', 'text-white');
            
            setTimeout(() => {
                e.target.reset();
                btn.innerText = originalText;
                btn.classList.remove('bg-green-500', 'text-white');
                btn.classList.add('bg-brand-cyan', 'text-brand-dark', 'hover:bg-white');
            }, 3000);
        }

        // Navbar Scroll Effect
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('shadow-lg', 'bg-brand-dark/95');
                navbar.classList.remove('bg-brand-dark/80');
            } else {
                navbar.classList.remove('shadow-lg', 'bg-brand-dark/95');
                navbar.classList.add('bg-brand-dark/80');
            }
        });
    </script>
</body>
</html>
